

Using Conditional Predicates
--------------------------------------

--FIRST WE WILL DIABLE ALL EXISTING TRIGGER TO A SPECIFIC TABLE
ALTER TABLE EMPLOYEE_COPY DISABLE ALL TRIGGERS;
/
CREATE OR REPLACE TRIGGER TRG_EMPLOYEES_CONDITIONAL BEFORE
	INSERT OR
	UPDATE OR
	DELETE ON EMPLOYEE_COPY REFERENCING OLD AS O NEW AS N FOR EACH ROW 
BEGIN 
	IF inserting THEN 
	  DBMS_OUTPUT.PUT_LINE('before inserting');
	elsif updating THEN
	  DBMS_OUTPUT.PUT_LINE('before updating');
	elsif deleting THEN
	  DBMS_OUTPUT.PUT_LINE('before deleting');
	END IF;
END TRG_EMPLOYEES_CONDITIONAL;


--NOW WE WILL UPDATE SOME VALUES
/
UPDATE EMPLOYEE_COPY SET SALARY = SALARY + 100 WHERE EMPLOYEE_ID=102;
/
DELETE FROM EMPLOYEE_COPY WHERE EMPLOYEE_ID=102;
/
SELECT *FROM EMPLOYEE_COPY WHERE EMPLOYEE_ID=102;
/
SET SERVEROUTPUT ON;


--we can also specify column level 
CREATE OR REPLACE TRIGGER TRG_EMPLOYEES_CONDITIONAL BEFORE
	INSERT OR
	UPDATE OR
	DELETE ON EMPLOYEE_COPY REFERENCING OLD AS O NEW AS N FOR EACH ROW 
BEGIN 
	IF inserting THEN 
	  DBMS_OUTPUT.PUT_LINE('before inserting');
	elsif updating ('salary') THEN
	  DBMS_OUTPUT.PUT_LINE('before updating');
	elsif deleting THEN
	  DBMS_OUTPUT.PUT_LINE('before deleting');
	END IF;
END TRG_EMPLOYEES_CONDITIONAL;