
Tablespace:
	When a table is created, a segment is created to hold its data.
	A tablespace contains collection of segments.
	
	Logically, when a tablespace is created, a extent is allocated.
	a extent contains 8 numbers of block.
	Each Block is 8 KB size, So that a extent size is 8x8=64KB
	
	Physically, when a tablespace is created, a datafile also created and it is physical.
	If we consider the datafile size is 100MB, Means it will create 100MB OS block to store data.
	
	[IMAGE]How table data is stored
	[IMAGE]Database block: content
	
	-Check database status
	[oracle@dba167 ~]$ srvctl status database -d dba167
	
	
-let's check tablespace info[SQL DEVELOPER]
select *from v$tablespace;
select *from dba_tablespaces;

Tablespace Type:
  Permanent Tablespace
  UNDO Tablespace
  Temp Tablespace

Permanent Tablespace
####################################
Tablespace may be
  BIG FILE tablespace - 1 file exist and max size is 128 TB
  Small File Tablespace (Default)- Multiple datafile can create and max size of each datafile is 32 GB
  
  -let's create table space
  -let's check datafiles
  select * from v$datafile;
  select * from dba_data_files;
  select *From v$asm_diskgroup;
  
  
  --now create a tablespace with the name of TestTab1
  create tablespace TestTab1
  --datafile <location and filename>
  datafile '+DATA/DBA167/DATAFILE/TestTab101.dbf' 
  size 100M 
  autoextend on;
  
 Manual: Datafile name, location and size.
 Auto  : OMF - Oracle managed file
 
 Note: If we don't specify the datafile location then the file name will be generated by OMF.
 -let's see the create parameter
	SQL> show parameter create

	NAME                                 TYPE        VALUE
	------------------------------------ ----------- ------------------------------
	create_bitmap_area_size              integer     8388608
	create_stored_outlines               string
	db_create_file_dest                  string      +DATA
	db_create_online_log_dest_1          string
	db_create_online_log_dest_2          string
	db_create_online_log_dest_3          string
	db_create_online_log_dest_4          string
	db_create_online_log_dest_5          string

 -let's see OMF
 create tablespace testtab2;
 
 -So, the location of the file will be created by using the create parameter "db_create_file_dest"
 
 --note: default space is 100 MB and will be auto extend
 
  create tablespace testtab3 size 200MB;
  --Note: not auto extend
  
  - OMF is recommendated by oracle
  
  -if you want to change to tablespace properties
  alter database datafile "Data_file_location" autoextend on
  
  -let's add another datafile for a tablespace
  -first we need to create a tablespace
	create tablespace TestTab4 
	datafile '+DATA/DBA167/DATAFILE/TestTab4.dbf'
	size 10M 
	autoextend on;

	-let's add another datafile for a tablespace
	alter tablespace TestTab4  
	add datafile '+DATA/DBA167/DATAFILE/TestTab401.dbf' 
	size 10M 
	autoextend on;
	
	-resizing datafile by 
	alter database datafile '+DATA/DBA167/DATAFILE/TestTab401.dbf' resize 30MB;
	
	
	--So that, Tablespace access by user
		-default tablespace
		-By Quoto permission.
		
UNDO Tablespace
###############
-Why undo tablespace?
If we have any changes like update record 5000 instead of 4000 and if we need to rollback. So where the data will be rollback.
Hence the undo tablespace stored those data.

-How to create the undow tablespace?
CREATE UNDO TABLESPACE 	TestUNDO
datafile '+DATA/DBA167/DATAFILE/TestUNDO.dbf'
size 100M
autoextend on;

-How to we set defult undo tablespace?
Let's see the undo parameter values?
SQL> show parameter undo

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
temp_undo_enabled                    boolean     FALSE
undo_management                      string      AUTO
undo_retention                       integer     900
undo_tablespace                      string      UNDOTBS1

-now we'll set undo tablespace
SQL> alter system set undo_tablespace='TESTUNDO';

System altered.

Let's see the undo parameter values?
SQL> show parameter undo

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
temp_undo_enabled                    boolean     FALSE
undo_management                      string      AUTO
undo_retention                       integer     900
undo_tablespace                      string      TESTUNDO


TEMP tablespace
###############
-Why TEMP tablespace?
Tem tablespace will contain sorting, grouping related data

-How to create the undow tablespace?

--let's check first the temp file location
select *From v$tempfile;
--+DATA/DBA167/TEMPFILE/temp.265.1106721901

CREATE TEMPORARY TABLESPACE 	TESTTEMP
tempfile '+DATA/DBA167/TEMPFILE/TESTTEMP.dbf'
size 100M
autoextend on;

-How to we set defult temp tablespace?
Let's see the temp parameter values?
SQL>select *from database_properties 
where PROPERTY_NAME='DEFAULT_TEMP_TABLESPACE';

-now set the tablespace name
alter database default temporary tablespace TESTTEMP

now check again 
SQL>select *from database_properties 
where PROPERTY_NAME='DEFAULT_TEMP_TABLESPACE';

















	
	
	
	

 
 

	
